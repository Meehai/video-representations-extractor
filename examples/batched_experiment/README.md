# Batched experiment

See [implementation](batched_experiment.py) for cfg and code.

**2024.11.13**

| Representation               | bs=1      | bs=3      | bs=5      | Speedup-3/1 | Speedup-5/1 |
|------------------------------|-----------|-----------|-----------|-------------|-------------|
| depth_marigold               | 0.629825  | 0.551567  | 0.544748  | 1.141883    | 1.156177    |
| depth_dpt                    | 0.173085  | 0.146493  | 0.141529  | 1.181525    | 1.222965    |
| mask2former(swin_coco)       | 0.454507  | 0.385084  | 0.396082  | 1.180280    | 1.147508    |
| mask2former(r50_mapillary)   | 0.417179  | 0.391488  | NaN       | 1.065624    | NaN         |
| fastsam(x)                   | 0.155401  | 0.139958  | 0.138545  | 1.110345    | 1.121665    |
| fastsam(s)                   | 0.146258  | 0.133964  | 0.139980  | 1.091764    | 1.044850    |
| opticalflow_rife             | 0.205303  | 0.194437  | 0.187924  | 1.055881    | 1.092476    |
| edges_dexined                | 0.126871  | 0.109935  | 0.107719  | 1.154060    | 1.177796    |
| softseg_gb                   | 0.391460  | 0.406979  | 0.387609  | 0.961870    | 1.009937    |
| edges_canny                  | 0.026773  | 0.036116  | 0.029457  | 0.741297    | 0.908870    |
| halftone1                    | 3.606885  | 3.702342  | 3.635017  | 0.974217    | 0.992261    |
| rgb                          | 0.053180  | 0.051337  | 0.052366  | 1.035907    | 1.015557    |
| normals_svd(depth_dpt)       | 11.652883 | 11.951592 | 12.106503 | 0.975007    | 0.962531    |
| hsv                          | 0.290225  | 0.300504  | 0.320898  | 0.965794    | 0.904413    |

One year later... we seem to have lost some performance. We indeed changed a lot of things, the code is more robust,
but maybe the 'happy paths' are worse now. Most notable: fast sam ain't that fast anymore o_O.

**2023.11.11**
|                        |    batch=1 |    batch=3 |   ratio 1/3 |    batch=5 |   ratio 1/5 |
|:-----------------------|-----------:|-----------:|------------:|-----------:|------------:|
| rgb                    | 0.00287311 | 0.00285926 |    1.00485  | 0.00355646 |    0.807857 |
| hsv                    | 0.227086   | 0.23222    |    0.977893 | 0.234075   |    0.970141 |
| normals_svd(depth_dpt) | 3.05688    | 3.04678    |    1.00331  | 3.096      |    0.987362 |
| halftone               | 3.1492     | 3.14151    |    1.00245  | 3.13804    |    1.00356  |
| edges_canny            | 0.0149038  | 0.0143591  |    1.03793  | 0.0142797  |    1.0437   |
| softseg_gb             | 0.256591   | 0.244486   |    1.04952  | 0.236025   |    1.08714  |
| edges_dexined          | 0.121858   | 0.10822    |    1.12602  | 0.105016   |    1.16038  |
| depth_dpt              | 0.134931   | 0.121348   |    1.11193  | 0.113324   |    1.19066  |
| fastsam(x)             | 0.0565283  | 0.0414641  |    1.36331  | 0.0392864  |    1.43888  |
| opticalflow_rife       | 0.0435189  | 0.0308007  |    1.41292  | 0.0288509  |    1.50841  |
| opticalflow_raft       | 0.999548   | 0.742625   |    1.34597  | 0.650921   |    1.53559  |
| fastsam(s)             | 0.0348993  | 0.0215417  |    1.62008  | 0.019354   |    1.80321  |
| semantic safeuav torch | 0.0251322  | 0.012268   |    2.04859  | 0.00914755 |    2.74742  |

